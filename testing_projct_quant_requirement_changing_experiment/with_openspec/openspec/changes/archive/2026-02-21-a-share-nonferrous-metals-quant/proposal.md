## Why

A股有色金属板块是典型的强周期行业，股价受金属价格、宏观经济、供需格局等多重因子驱动，波动大、弹性高。手动跟踪这些因子耗时且容易遗漏关键信号。需要一个量化系统来系统性地采集数据、计算因子、生成交易信号，帮助投资者做出更理性的决策。

## What Changes

- 构建完整的A股有色金属多因子量化交易系统
- 自动获取有色金属板块股票列表（申万行业分类）
- 采集行情数据、财务数据、商品期货数据、宏观数据、资金流数据
- 实现五大类因子计算引擎（基本面、技术面、商品、宏观、情绪/资金流）
- 实现多因子打分选股与商品动量择时
- 内置风控体系（止损、仓位管理、回撤控制）
- 提供回测框架（含A股T+1、涨跌停、交易成本等真实约束）
- 生成可视化报告（持仓、因子暴露、绩效归因）

## Capabilities

### New Capabilities

- `data-pipeline`: 数据采集管道 — 基于 AKShare/Tushare/BaoStock 获取A股行情、财务报表、商品期货价格（LME/SHFE）、宏观指标（PMI/汇率/M1）、融资融券及北向资金数据，支持增量更新与本地缓存
- `stock-universe`: 股票池管理 — 基于申万行业分类筛选有色金属板块成分股，按子板块（铜/铝/黄金/稀土/锂/钴镍/锌铅）分类，自动剔除ST、停牌、次新股
- `factor-engine`: 因子计算引擎 — 实现五大类因子：基本面因子（PB分位/毛利率变化/ROE/EV-EBITDA）、技术因子（动量/反转/换手率/波动率/量价）、商品因子（金属价格动量/期货升贴水/库存变化/内外比价）、宏观因子（PMI/美元指数/M1/社融）、资金流因子（融资余额/北向资金/主力资金流）
- `scoring-strategy`: 多因子打分选股策略 — 因子标准化、截面打分、加权合成（商品35%/基本面25%/技术20%/资金流15%/宏观5%），支持等权和IC加权两种模式
- `market-timing`: 商品动量择时模块 — 基于SHFE铜/铝期货价格动量判断板块方向，动态调整总仓位（满仓/六成/三成/两成），黄金作为避险对冲信号
- `risk-management`: 风控体系 — 个股止损（2倍ATR硬止损 + 移动止损）、单票仓位上限10%、子板块仓位上限25%、组合最大回撤15%触发减仓、波动率自适应仓位管理
- `backtest-engine`: 回测框架 — 严格模拟A股T+1交易制度、涨跌停限制、停牌处理、交易成本（印花税0.05%+佣金万三+滑点0.15%）、幸存者偏差修正，输出年化收益/夏普比率/最大回撤等绩效指标
- `report-dashboard`: 报告与可视化 — 生成持仓一览、因子暴露热力图、子板块权重、绩效走势、回撤分析、因子IC跟踪等可视化图表

### Modified Capabilities

（新项目，无已有能力需要修改）

## Impact

- **技术栈**: Python 3.10+，依赖 AKShare、pandas、numpy、matplotlib/plotly
- **数据源**: AKShare（免费，核心数据源）、BaoStock（免费，历史行情补充）、Tushare（免费额度，财务数据补充）
- **存储**: 本地 SQLite 或 Parquet 文件缓存，避免重复请求
- **运行频率**: 月度调仓为主，每日运行风控检查
- **目标用户**: 量化投资初学者，无需专业金融或编程背景
- **合规提醒**: 本系统仅用于学习和研究目的，不构成投资建议
